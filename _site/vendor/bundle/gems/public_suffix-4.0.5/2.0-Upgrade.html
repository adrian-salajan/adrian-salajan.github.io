<!DOCTYPE html>
<!--
    Basically Basic Jekyll Theme 1.4.4
    Copyright 2017-2018 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/jekyll-theme-basically-basic/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
    <title>Welcome to PublicSuffix 2.0!</title>
    <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search resu...">
    <link rel="canonical" href="/vendor/bundle/gems/public_suffix-4.0.5/2.0-Upgrade.html">
  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/stylesheets/main.css">
  

  
    
    <link rel="alternate" type="application/atom+xml" title="Your awesome title" href="/feed.xml">
  
</head>


  <body class="layout--page welcome-to-publicsuffix-2-0">

    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>


    <div class="sidebar-toggle-wrapper">
      

      <button class="toggle navicon-button larr" type="button">
        <span class="toggle-inner">
          <span class="sidebar-toggle-label visually-hidden">Menu</span>
          <span class="navicon"></span>
        </span>
      </button>
    </div>

    <div id="sidebar" class="sidebar">
      <div class="inner">
        <nav id="primary-nav" class="site-nav" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <ul id="menu-main-navigation" class="menu">
    <!-- Home link -->
    <li class="menu-item">
      <a href="/" itemprop="url">
        <span itemprop="name">Home</span>
      </a>
    </li>

    <!-- site.pages links -->
    
    

    
      
      
    
      
      
<<<<<<< Updated upstream
=======
        <li class="menu-item">
          <a href="/about/" itemprop="url">
            <span itemprop="name">About</span>
          </a>
        </li>
      
    
      
      
    
      
      
    
      
      
>>>>>>> Stashed changes
    
      
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/addressable-2.7.0/CHANGELOG.html" itemprop="url">
            <span itemprop="name">Addressable 2.7.0</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/colorator-1.1.0/History.html" itemprop="url">
            <span itemprop="name">1.1.0 / 2016-06-28</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/concurrent-ruby-1.1.6/CHANGELOG.html" itemprop="url">
            <span itemprop="name">Current</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/eventmachine-1.2.7/CHANGELOG.html" itemprop="url">
            <span itemprop="name">Changelog</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/eventmachine-1.2.7/docs/DocumentationGuidesIndex.html" itemprop="url">
            <span itemprop="name">EventMachine documentation guides #</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/eventmachine-1.2.7/docs/GettingStarted.html" itemprop="url">
            <span itemprop="name">@title Getting Started with Ruby EventMachine</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/public_suffix-4.0.5/2.0-Upgrade.html" itemprop="url">
            <span itemprop="name">Welcome to PublicSuffix 2.0!</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/public_suffix-4.0.5/CHANGELOG.html" itemprop="url">
            <span itemprop="name">Changelog</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/public_suffix-4.0.5/SECURITY.html" itemprop="url">
            <span itemprop="name">Security Policy</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/addressable-2.7.0/" itemprop="url">
            <span itemprop="name">Addressable</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/colorator-1.1.0/" itemprop="url">
            <span itemprop="name">colorator</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/concurrent-ruby-1.1.6/" itemprop="url">
            <span itemprop="name">Concurrent Ruby</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/eventmachine-1.2.7/" itemprop="url">
            <span itemprop="name">About EventMachine</span>
          </a>
        </li>
      
    
      
      
        <li class="menu-item">
          <a href="/vendor/bundle/gems/public_suffix-4.0.5/" itemprop="url">
            <span itemprop="name">Public Suffix for Ruby</span>
          </a>
        </li>
      
    
      
      
    
      
      
    
      
      
    
  </ul>
</nav>

        <ul class="contact-list">
  
    <li>
      <a href="mailto:your-email@example.com">
        <span class="icon icon--email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="313.1 3.7 16 16"><path d="M318.5 8.9c0-.2.2-.4.4-.4h4.5c.2 0 .4.2.4.4s-.2.4-.4.4h-4.5c-.3 0-.4-.2-.4-.4zm.4 2.1h4.5c.2 0 .4-.2.4-.4s-.2-.4-.4-.4h-4.5c-.2 0-.4.2-.4.4s.1.4.4.4zm3.5 1.2c0-.2-.2-.4-.4-.4h-3.1c-.2 0-.4.2-.4.4s.2.4.4.4h3.1c.2.1.4-.1.4-.4zm-1.5-8.4l-1.7 1.4c-.2.1-.2.4 0 .6s.4.2.6 0l1.4-1.2 1.4 1.2c.2.1.4.1.6 0s.1-.4 0-.6l-1.7-1.4c-.3-.1-.5-.1-.6 0zm7.8 6.2c.1.1.1.2.1.3v7.9c0 .8-.7 1.5-1.5 1.5h-12.5c-.8 0-1.5-.7-1.5-1.5v-7.9c0-.1.1-.2.1-.3l1.6-1.3c.2-.1.4-.1.6 0s.1.4 0 .6l-1.2 1 1.8 1.3v-4c0-.6.5-1.1 1.1-1.1h7.5c.6 0 1.1.5 1.1 1.1v4l1.8-1.3-1.2-1c-.2-.1-.2-.4 0-.6s.4-.2.6 0l1.6 1.3zm-11.6 2.2l4 2.8 4-2.8V7.6c0-.1-.1-.2-.2-.2h-7.5c-.1 0-.2.1-.2.2v4.6zm10.9-1l-4.7 3.4 3.4 2.6c.2.1.2.4.1.6-.1.2-.4.2-.6.1l-3.6-2.8-1.2.8c-.1.1-.3.1-.5 0l-1.2-.8-3.6 2.8c-.2.1-.4.1-.6-.1-.1-.2-.1-.4.1-.6l3.4-2.6-4.7-3.4v7.1c0 .4.3.6.6.6h12.5c.4 0 .6-.3.6-.6v-7.1z"/></svg></span>
        <span class="label">Email</span>
      </a>
    </li>
  

  
    <li><a href="https://github.com/jekyll">
  <span class="icon icon--github"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.09-.202-.36-1.015.07-2.117 0 0 .67-.215 2.2.82.64-.178 1.32-.266 2-.27.68.004 1.36.092 2 .27 1.52-1.035 2.19-.82 2.19-.82.43 1.102.16 1.915.08 2.117.51.56.82 1.274.82 2.147 0 3.073-1.87 3.75-3.65 3.947.28.24.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.14.46.55.38C13.71 14.53 16 11.53 16 8c0-4.418-3.582-8-8-8"/></svg></span>
  <span class="label">GitHub</span>
</a>
</li>
  

  
    <li><a href="https://twitter.com/jekyllrb">
  <span class="icon icon--twitter"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812 0-3.282 1.47-3.282 3.28 0 .26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26 0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z" fill-rule="nonzero"/></svg></span>
  <span class="label">Twitter</span>
</a>
</li>
  

  <li>
    
      <a href="/feed.xml" title="Atom Feed">
        <span class="icon icon--rss"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"/></svg></span>
        <span class="label">Subscribe</span>
      </a>
    
  </li>
</ul>

      </div>
    </div>

    <div class="canvas">
      <div class="wrapper">
        

<header id="masthead">
  <div class="inner">
    <div class="title-area">
      
        <p class="site-title">
          <a href="/">
            
            <span>Your awesome title</span>
          </a>
        </p>
      
    </div>
  </div>
</header>

        <div class="initial-content">
          <header class="intro">
  

  <div class="inner">
    <div class="intro-text">
      <h1 id="page-title" class="intro-title">Welcome to PublicSuffix 2.0!
</h1>
      

      

      

      
    </div>
  </div>
</header>


<main id="main" class="page-content" aria-label="Content">
  <div class="inner">
    <article class="entry-wrap">
      <div class="entry-content">
        <h1 id="welcome-to-publicsuffix-20">Welcome to PublicSuffix 2.0!</h1>

<p>PublicSuffix 2.0 contains a rewritten internal representation and comparison logic, that drastically increases the lookup performance. The new version also changes several internal and external API.</p>

<p>This document documents the most relevant changes to help you upgrading from PublicSuffix 1.0 to 2.0.</p>

<h2 id="whats-new">What’s New</h2>

<ul>
  <li>The library is now 100% compliants with the official PublicSuffix tests. The major breaking change you may experience, is that if a domain passed as input doesn’t match any rule, the rule <code class="language-plaintext highlighter-rouge">*</code> is assumed. You can override this behavior by passing a custom default rule with the <code class="language-plaintext highlighter-rouge">default_rule</code> option. The old behavior can be restored by passing <code class="language-plaintext highlighter-rouge">default_rule: nil</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">PublicSuffix.domain</code> is a new method that parses the input and returns the domain (combination of second level domain + suffix). This is a convenient helper to parse a domain name, for example when you need to determine the cookie or SSL scope.</li>
  <li>Added the ability to disable the use of private domains either at runtime, in addition to the ability to not load the private domains section when reading the list (<code class="language-plaintext highlighter-rouge">private_domains: false</code>). This feature also superseded the <code class="language-plaintext highlighter-rouge">private_domains</code> class-level attribute, that is no longer available.</li>
</ul>

<h2 id="upgrade">Upgrade</h2>

<p>When upgrading, here’s the most relevant changes to keep an eye on:</p>

<ul>
  <li>Several futile utility helpers were removed, such as <code class="language-plaintext highlighter-rouge">Domain#rule</code>, <code class="language-plaintext highlighter-rouge">Domain#is_a_domain?</code>, <code class="language-plaintext highlighter-rouge">Domain#is_a_subdomain?</code>, <code class="language-plaintext highlighter-rouge">Domain#valid?</code>. You can easily obtain the same result by having a custom method that reconstructs the logic, and/or calling <code class="language-plaintext highlighter-rouge">PublicSuffix.{domain|parse}(domain.to_s)</code>.</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">PublicSuffix::List.private_domains</code> is no longer available. Instead, you now have two ways to enable/disable the private domains:</p>

    <ol>
      <li>At runtime, by using the <code class="language-plaintext highlighter-rouge">ignore_private</code> option</li>
    </ol>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">domain</span><span class="p">(</span><span class="s2">"something.blogspot.com"</span><span class="p">,</span> <span class="ss">ignore_private: </span><span class="kp">true</span><span class="p">)</span>
</code></pre></div>    </div>

    <ol>
      <li>Loading a filtered list:</li>
    </ol>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># Disable support for private TLDs</span>
  <span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="p">.</span><span class="nf">default</span> <span class="o">=</span> <span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="no">PublicSuffix</span><span class="o">::</span><span class="no">List</span><span class="o">::</span><span class="no">DEFAULT_LIST_PATH</span><span class="p">),</span> <span class="ss">private_domains: </span><span class="kp">false</span><span class="p">)</span>
  <span class="c1"># =&gt; "blogspot.com"</span>
  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">domain</span><span class="p">(</span><span class="s2">"something.blogspot.com"</span><span class="p">)</span>
  <span class="c1"># =&gt; "blogspot.com"</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now that the library is 100% compliant with the official PublicSuffix algorithm, if a domain passed as input doesn’t match any rule, the wildcard rule <code class="language-plaintext highlighter-rouge">*</code> is assumed. This means that unlisted TLDs will be considered valid by default, when they would have been invalid in 1.x. However, you can override this behavior to emulate the 1.x behavior if needed:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># 1.x:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">)</span>
  <span class="c1"># =&gt; false</span>

  <span class="c1"># 2.x:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">)</span>
  <span class="c1"># =&gt; true</span>

  <span class="c1"># Overriding 2.x behavior if needed:</span>

  <span class="no">PublicSuffix</span><span class="p">.</span><span class="nf">valid?</span><span class="p">(</span><span class="s2">"google.commm"</span><span class="p">,</span> <span class="ss">default_rule: </span><span class="kp">nil</span><span class="p">)</span>
  <span class="c1"># =&gt; false</span>
</code></pre></div>    </div>
  </li>
</ul>

      </div>
    </article>
  </div>
</main>

        </div>

        <div class="search-content">
          <div class="inner">
  
</div>

        </div>
      </div>
    </div>

    <footer id="footer" class="site-footer">
  <div class="inner">
    <div class="copyright">
      
        <p>&copy; 2020 Your awesome title.</p>
      
    </div>
  </div>
</footer>

    

<script async src="/assets/javascripts/main.js"></script>




  </body>

</html>
